<script>
    submitImage = function() {
        var promptTheme = ["The crazy hot-blooded outdoor rock music festival in Kaohsiung, Taiwan"];
        var ads = ["a fire extinguisher", "Heineken", "lighters", ];
        var mainPrompts = promptTheme.concat(ads);
        var translatePrompt = `Reply only the translation of this sentence in English: "${userInput}"`
        fetch("/prompt", {
            "method": "POST",
            "body": translatePrompt
        })
        .then((res) => res.text())
        .then((text) => {
            var completePrompt = JSON.stringify(mainPrompts.concat([text]));
            console.log(text);
            fetch("/prompt-image", {
                "method": "POST",
                "body": englishPrompt
            })
            .then((res) => res.text())
            .then((base64String) => {
                // Create an image element
                const img = document.createElement('img');

                // Set the src attribute to the base64 string
                img.src = `data:image/png;base64,${base64String}`;

                // Optionally set attributes like width and height
                img.style.width = "100%";

                // Append the image to the container
                document.getElementById('result-box').style.display = "block";
                document.getElementById('result-box').appendChild(img);
                document.getElementById('result-box') += "<br />";
            });
        });
    }
</script>
<h1>AI創意生圖</h1><br />
<div class="form__group">
    AI會生成大港開唱主題的圖片，你可以輸入你想要穿插在裡面的元素：
    <input type="text" class="form__input" id="user-input" placeholder="範例: 機車" required="" />
    <div class="button-group">
        <button style="cursor: pointer;" type="button" onclick="submitImage();">送出</button>
    </div>
    <div id="result-box" style="text-align: left; display: none;">
        <b>AI生的圖:</b><br />
    </div>
</div>